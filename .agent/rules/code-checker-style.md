---
trigger: always_on
---

### 核心开发规范 (Core Development Standards)

1. **机制对称性 (Symmetrical Mechanics)**: 新增或修改游戏机制时，必须验证其在人类玩家与 AI 代理（Agent）之间具有逻辑对称性。
   - **操作要求 (Definition of Done)**:
     - 在修改玩家逻辑 (`handlePlayerInput`) 后，必须立即定位并同步修改对应的 AI 逻辑 (`handleAI`)。
     - 必须验证数据状态 (`PlayerState`)、资源消耗 (MP/Fuel) 以及技能行为在两侧的运行约束是否完全一致。
     - **强制回复**: 完成修改后，必须在回复中明确说明：“已完成玩家与 AI 的逻辑对称性验证”。
2. **环境控制 (Environment Control)**: 禁止擅自启动本地开发服务器或背景常驻进程。保持开发环境的简洁与确定性。
3. **全球化架构导向 (Globalization Ready)**: 界面文案应具备多语言 (i18n) 扩展能力。避免散乱的文本硬编码，优先采用集中式资源管理，以支持未来语言切换及文案批量维护的高效性。
4. **状态化机制维护 (Stateful Maintenance)**: 对于包含蓄力 (Charge)、引导 (Channeling) 或分阶段施放 (Phased Casting) 的技能机制，AI 逻辑必须实现完整的状态维护循环（每帧更新）。严禁仅实现“单次触发”逻辑，必须确保 AI 在该状态下持续执行资源消耗（如 MP 扣减）、瞄准修正及逻辑退出判定，以维持与人类玩家完全一致的运行约束。

### 对战兼容性设计 (PvP Compatibility)
- 实现新机制、视觉特效或全局状态（如子弹时间、屏幕滤镜等）时，架构必须原生兼容未来的 PVP 模式。
- 设计原则：所有特效与状态必须由同步的底层数据 (Synced State)驱动，严禁由本地输入事件直接驱动。
- 视觉验证：确保所有客户端（包括本地玩家、人类对手及 AI）在对应状态下均能复现一致的视觉表现。
